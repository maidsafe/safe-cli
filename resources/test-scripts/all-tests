#!/bin/bash

set -e -x

# setup auth cli
#rm -rf ~/safe-auth
#git clone https://github.com/maidsafe/safe-authenticator-cli.git ~/safe-auth
#cd ~/safe-auth
#ls
#SAFE_AUTH_SECRET=a SAFE_AUTH_PASSWORD=b cargo run --features mock-network -- -i nonsense
#SAFE_AUTH_SECRET=a SAFE_AUTH_PASSWORD=b cargo run --features mock-network -- --daemon 41805 --allow-all-auth &
#sleep 15
#cd -

#cargo run --release --features mock-network -- auth

# run tests with CLI's own mock
cargo test --release --features=scl-mock api::files::test_files_container_sync -- --test-threads=1

# run the unit tests now with SCL's mock-network, for now with fake-auth
cargo test --release --features="mock-network fake-auth" api::files::test_files_container_sync -- --test-threads=1
